{% extends 'sklad/base.html' %}

{% block left_menu %}
    <ul id="left-chapters">
        <li><a href="{% url 'nomenklature_add' %}">Добавить номенклатуру</a></li>
        {% regroup subcats by category as categories %}
        {% for category in categories %}
            <li><a href="{{ category.grouper.get_absolute_url }}">{{ category.grouper }}</a></li>
            <ul>
                {% for subcategory in category.list %}
                    <li><a href="{{ subcategory.get_absolute_url }}">{{ subcategory }}</a></li>
                {% endfor %}
            </ul>
        {% endfor %}
    </ul>
{% endblock %}

{% block content %}

{% regroup nomenclatures by subcategory.category as categories %}
<ul>
{% for category in categories %}
    <li>{{ category.grouper }}
    <ul>
        {% regroup category.list by subcategory as subcategories %}
        {% for subcategory in subcategories %}
            <li>{{ subcategory.grouper }}</li>
            {% for nomenclature in subcategory.list %}
                <div class="article-panel">
                <p class="first"><a href="{{ nomenclature.get_absolute_url }}">{{ nomenclature.name }}</a>: {{ nomenclature.article }} / Остаток ({{ nomenclature.store_amount }}) </p>
                </div>
            {% endfor %}
        {% endfor %}
    </ul>
    </li>
{% endfor %}
</ul>

{% endblock %}
